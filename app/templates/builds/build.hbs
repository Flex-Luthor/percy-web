<div class="container container--forContent BuildContainer">
  {{approval-section build=model classes="u-pull-right"}}
  <h5>
    {{#link-to "namespace.index" model.repo.namespace.id}}{{model.repo.namespace.id}}{{/link-to}}/{{#link-to "repo.index" model.repo.namespace.id model.repo.name}}{{model.repo.name}}{{/link-to}}
    <a href="{{model.repo.htmlUrl}}">{{fa-icon "github"}}</a>
    {{#link-to "repo.settings" model.repo.name}}{{fa-icon "cog" classNames="fa--left"}}{{/link-to}}
    Build #{{model.buildNumber}}
  </h5>

  {{#if model.commit}}
    {{commit-info build=model}}
  {{/if}}
  <br>
  {{build-state build=model}}
  <div>{{build-duration build=model}}</div>
  <div>{{build-started build=model}}</div>
  <div>{{build-comparison-info build=model}}</div>
  <hr>

  {{#if model.isPending}}
    <div class="Alert Alert--warning">
      <strong>Waiting for snapshot uploads...</strong> This build has not finished receiving data from your CI service or client, <a href="javascript:location.reload()">refresh</a>?
      <br>
      If this has been pending for a long time, your client may have failed to upload all the data. This build can be safely ignored, it will not be used for visual diffs.
    </div>
  {{/if}}
  {{#if model.isProcessing}}
    <div class="Alert Alert--warning">
      <strong>Still working!</strong> This build has not finished processing, <a href="javascript:location.reload()">refresh</a>?
    </div>
  {{/if}}
  {{#if model.isFailed}}
    <div class="Alert Alert--error">
      <strong>Errored.</strong> Your CI service or client failed to correctly upload data. This build can be safely ignored, it will not be used for visual diffs. If these failures continue to happen, check your CI or client logs for failures.
    </div>
  {{/if}}

  {{#if model.comparisons.isPending}}
    {{loading-page}}
  {{else}}
    <h5>{{model.comparisons.length}} snapshots:</h5>
    {{comparison-list comparisons=model.comparisons}}
  {{/if}}
</div>
