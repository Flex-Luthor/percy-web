<div class="ComparisonViewer-header row">
  <strong>{{comparison.headSnapshot.name}}</strong>
  {{comparison-status comparison=comparison classes="u-pull-right"}}
  {{comparison-duration comparison=comparison classes="u-pull-right"}}
</div>
{{#if isExpanded}}
  {{#if comparison.wasCompared}}
    {{#if comparison.isDifferent}}
      <div class="row">
        <div class="ComparisonViewer-halfColumn ComparisonViewer-halfColumn--left">
          <div class="ComparisonViewer-pdiffImageBox">
            {{#with comparison.baseScreenshot.lossyImage as |image|}}
              <img class="ComparisonViewer-pdiffImage" width="{{image.width}}" height="{{image.height}}" src="{{image.url}}">
            {{/with}}
          </div>
        </div>
        <div class="ComparisonViewer-halfColumn ComparisonViewer-halfColumn--right">
          <div class="ComparisonViewer-pdiffImageBox ComparisonViewer-pdiffImageBox--actionable">
            {{#with comparison.headScreenshot.lossyImage as |image|}}
              <img {{action "toggleOverlay"}} class="ComparisonViewer-pdiffImage ComparisonViewer-pdiffImage--actionable" width="{{image.width}}" height="{{image.height}}" src="{{image.url}}">
            {{/with}}
            {{#if isOverlayEnabled}}
              {{#with comparison.pdiff.diffImage as |image|}}
                <img {{action "toggleOverlay"}} class="ComparisonViewer-pdiffImageOverlay" width="{{image.width}}" height="{{image.height}}" src="{{image.url}}">
              {{/with}}
            {{/if}}
          </div>
        </div>
      </div>
    {{else}}
      {{!-- Compared, but not different. --}}
      <div class="row ComparisonViewer-noDiffBox">
        No visual diffs detected.

        {{#if showNoDiffSnapshot}}
          <a {{action "toggleNoDiffResource"}} href="#">Hide snapshot</a>
        {{else}}
          <a {{action "toggleNoDiffResource"}} href="#">Show snapshot</a>
        {{/if}}
      </div>

      {{#if showNoDiffSnapshot}}
        <div class="row">
          <div class="ComparisonViewer-halfColumn ComparisonViewer-halfColumn--left">
            <div class="ComparisonViewer-snapshotMissing">
              {{fa-icon "arrows-h"}}
              <p class="u-text-small">No visual diffs detected.</p>
            </div>
          </div>
          <div class="ComparisonViewer-halfColumn ComparisonViewer-halfColumn--right">
            <div class="ComparisonViewer-pdiffImageBox">
              {{#with comparison.headScreenshot.lossyImage as |image|}}
                <img class="ComparisonViewer-pdiffImage" width="{{image.width}}" height="{{image.height}}" src="{{image.url}}">
              {{/with}}
            </div>
          </div>
        </div>
      {{/if}}
    {{/if}}
  {{else}}
    {{#if comparison.wasAdded}}
      {{! New snapshot. }}
      <div class="row">
        <div class="ComparisonViewer-halfColumn ComparisonViewer-halfColumn--left">
          <div class="ComparisonViewer-snapshotMissing">
            {{fa-icon "remove"}}
            <p class="u-text-small">New snapshot, nothing to compare yet.</p>
          </div>
        </div>
        <div class="ComparisonViewer-halfColumn ComparisonViewer-halfColumn--right">
          <div class="ComparisonViewer-pdiffImageBox">
            {{#with comparison.headScreenshot.lossyImage as |image|}}
              <img class="ComparisonViewer-pdiffImage" width="{{image.width}}" height="{{image.height}}" src="{{image.url}}">
            {{/with}}
          </div>
        </div>
      </div>
    {{/if}}
    {{#if comparison.wasRemoved}}
      {{!-- TODO: was removed. --}}
    {{/if}}
  {{/if}}
{{/if}}
